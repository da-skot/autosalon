# База данных автосалона
## Реляционная модель проектируемой базы данных
![alt text](https://github.com/da-skot/autosalon/blob/main/src/image.jpg)
## Описание представлений:
•	«getAllCars», содержит актуальную информацию об автомобилях (производитель, название, модель, категория, вес, цвет, поколение, мощность двигателя, объем двигателя, тип привода, год выпуска, разгон, расход топлива, максимальную скорость, коробку передач, цену и количество в автосалоне);

•	«getAllParts», содержит актуальную информацию о запчастях (производитель, название, модель, категория, размер, цвет, мощность, цену и количество в автосалоне);

•	«getAllSels», содержит актуальную информацию о покупках каждого пользователя (идентификатор покупателя, полное имя, телефон, производитель товара, название товара, модель, количество, полная стоимость).

## Описание функций:
•	«fn_getAllInformationCar», функция возвращает таблицу со всеми свойствами конкретной модели;

•	«fn_getAllEquipmentCar», функция возвращает таблицу со всеми комплектациями конкретного автомобиля;

•	«fn_getTotalSumCustomer», функция возвращает сумму затраченную конкретным пользователем в автосалоне за всё время;

•	«fn_FindToPower», функция возвращает таблицу со всеми автомобилями конкретной мощности.

## Описание хранимых процедур:
•	«MakePurchaseOrder», процедура позволяет создать новый заказ на поставку модели;

•	«AddNewCustomer», процедура позволяет добавить нового покупателя;

•	«AddNewOrder», процедура позволяет добавить новый заказ;

•	«AddModelToOrder», процедура позволяет добавить модель к заказу;

•	 «GetProductsFromCategory», процедура, возвращающая таблицу всех моделей конкретной категории;

•	 «uspFindStringInTable», процедура, осуществляющая поиск по строке в конкретной таблице.

## Описание триггеров:
•	«NewPurchaseOrder», создаёт новый заказ на поставку, если количество моделей в автосалоне меньше 5;

•	«CheckCount» срабатывает при оформлении заказа, выдаёт ошибку если количество моделей в заказе больше, чем в автосалоне;

•	«PurchaseClose», срабатывает при изменении таблицы «Поставка», если заказ пришёл, обновляет количество моделей в автосалоне.
